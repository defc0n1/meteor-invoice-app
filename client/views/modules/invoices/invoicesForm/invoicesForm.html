<template name="invoicesForm">

  <section id="TopBar">
    <nav>
      <a href="{{pathFor route='invoices' }}" class="cancel">Cancel</a>
    </nav>
  </section>

  <article class="right-col-form invoices-form">
  {{#autoForm id=formId type=formType collection="Invoices" doc=item }}

    <fieldset>
      <div class="field {{#if afFieldIsInvalid name='ownedByCompanyId'}}has-error{{/if}}">
        <label>{{_ 'Company'}}</label>
        <div class="value">
          {{> afFieldInput name='ownedByCompanyId'}}
          {{#if afFieldIsInvalid name='ownedByCompanyId'}}
          <span class="error">{{{afFieldMessage name='ownedByCompanyId'}}}</span>
          {{/if}}
        </div>
      </div>
      <div class="field {{#if afFieldIsInvalid name='invoiceNumber'}}has-error{{/if}}">
        <label>{{_ 'Invoice Number'}}</label>
        <div class="value">
          {{> afFieldInput name='invoiceNumber'}}
          {{#if afFieldIsInvalid name='invoiceNumber'}}
          <span class="error">{{{afFieldMessage name='invoiceNumber'}}}</span>
          {{/if}}
        </div>
      </div>
      <div class="field">
        <label>{{_ 'Invoice Date'}}</label>
        <div class="value">
          {{> afFieldInput name='dateIssued'}}
          {{#if afFieldIsInvalid name='dateIssued'}}
          <span class="error">{{{afFieldMessage name='dateIssued'}}}</span>
          {{/if}}
        </div>
      </div>
    </fieldset>

    <fieldset>
      <div class="field {{#if afFieldIsInvalid name='customer.name'}}has-error{{/if}}">
        <label>{{_ 'Customer Name'}}</label>
        <div class="value">
          {{> afFieldInput name='customer.name'}}
          {{#if afFieldIsInvalid name='customer.name'}}
          <span class="error">{{{afFieldMessage name='customer.name'}}}</span>
          {{/if}}
        </div>
      </div>
      <div class="field {{#if afFieldIsInvalid name='customer.company'}}has-error{{/if}}">
        <label>{{_ 'Customer Company'}}</label>
        <div class="value">
          {{> afFieldInput name='customer.company'}}
          {{#if afFieldIsInvalid name='customer.company'}}
          <span class="error">{{{afFieldMessage name='customer.company'}}}</span>
          {{/if}}
        </div>
      </div>
      <div class="field {{#if afFieldIsInvalid name='customer.taxNumber'}}has-error{{/if}}">
        <label>{{_ 'Customer Tax No.'}}</label>
        <div class="value">
          {{> afFieldInput name='customer.taxNumber'}}
          {{#if afFieldIsInvalid name='customer.taxNumber'}}
          <span class="error">{{{afFieldMessage name='customer.taxNumber'}}}</span>
          {{/if}}
        </div>
      </div>
      <div class="field {{#if afFieldIsInvalid name='customer.address'}}has-error{{/if}}">
        <label>{{_ 'Customer Address'}}</label>
        <div class="value">
          {{> afFieldInput name='customer.address'}}
          {{#if afFieldIsInvalid name='customer.address'}}
          <span class="error">{{{afFieldMessage name='customer.address'}}}</span>
          {{/if}}
        </div>
      </div>
    </fieldset>

    <fieldset>
      <table class="invoice-line-items">
        <thead>
          <tr>
            <td class="orderedItem.actions"></td>
            <td class="orderedItem.name">{{_ 'Product Name'}}</td>
            <td>{{_ 'Unit Price'}}</td>
            <td>{{_ 'Quantity'}}</td>
            <td>{{_ 'Price'}}</td>
          </tr>
        </thead>

        {{> afQuickField name='orderedItems' template='tableRow'}}

        <tfoot>
          <tr>
            <td class="orderedItem.actions"></td>
            <td></td>
            <td></td>
            <td class="tfoot-label">Subtotal</td>
            <td>{{> afFieldInput name='total.beforeGST' class="invoice-subtotal" }}</td>
          </tr>
          <tr>
            <td class="orderedItem.actions"></td>
            <td></td>
            <td></td>
            <td class="tfoot-label">GST</td>
            <td>{{> afFieldInput name='total.GST' class="invoice-GST" }}</td>
          </tr>
          <tr>
            <td class="orderedItem.actions"></td>
            <td></td>
            <td></td>
            <td class="tfoot-label">Total</td>
            <td>{{> afFieldInput name='total.afterGST' class="invoice-total-after-GST" }}</td>
          </tr>
        </tfoot>
      </table>
    </fieldset>

    <section id="BottomBar">
      <nav>
        <button type="submit" class="save">Done</button>
      </nav>
    </section>

    {{/autoForm}}
  </article>
</template>