<template name="invoiceList">
  <!--<a href="{{pathFor 'invoice.new' }}" data-nav-direction="right">New invoice</a>-->

  {{#contentFor "TopBar"}}
  <nav>
    {{#unless isUpdatingInvoice}}
      {{#if isAnyInvoiceSelected}}
        <a href="#" class="update">Update</a>
      {{else}}
        <a href="#" class="new">New</a>
      {{/if}}
    {{else}}
      <a href="#" class="cancel">Cancel</a>
    {{/unless}}
  </nav>
  {{/contentFor}}

  {{#contentFor "TheList"}}
  <ul class="list-multiple-lines">
    {{#each invoices}}
    <li class="{{ isThisInvoiceSelected }}" data-item-id="{{ _id }}">
      <article class="invoice-summary-card">
        <div class="invoice-total-after-GST">{{ total.afterGST }}d</div>
        <div class="invoice-customer-name">{{ customer.name }}</div>
        <div class="invoice-number">#{{ invoiceNumber }}</div>
        <div class="invoice-company-name">{{ customer.company }}</div>
      </article>
    </li>
    {{/each}}
  </ul>
  {{/contentFor}}

  {{#if isUpdatingInvoice }}
    <article id="InvoiceUpdate" class="invoice-details-card">
      {{> invoiceUpdate theInvoiceToUpdate=theSelectedInvoice}}
    </article>
  {{else}}
    {{#if isInsertingInvoice }}
      <article id="InvoiceInsert" class="invoice-details-card">
        {{> invoiceInsert }}
      </article>
    {{else}}
      <article id="InvoiceShow" class="invoice-details-card">
      {{#with theSelectedInvoice}}

      <fieldset>
          <div class="field">
            <label>{{_ 'Invoice Number'}}</label>
            <div class="value">{{ invoiceNumber }}</div>
          </div>
          <div class="field">
            <label>{{_ 'Invoice Date'}}</label>
            <div class="value">15/10/2015</div>
          </div>
      </fieldset>

      <fieldset>
        <div class="field">
          <label>{{_ 'Customer Name'}}</label>
          <div class="value">{{ customer.name }}</div>
        </div>
        <div class="field">
          <label>{{_ 'Customer Company'}}</label>
          <div class="value">{{ customer.company }}</div>
        </div>
        <div class="field">
          <label>{{_ 'Customer Tax No.'}}</label>
          <div class="value">{{ customer.taxNumber }}</div>
        </div>
        <div class="field">
          <label>{{_ 'Customer Address'}}</label>
          <div class="value">{{ customer.address }}</div>
        </div>
      </fieldset>

      <fieldset>
          <table class="invoice-line-items">

            <thead>
              <tr>
                <td class="orderedItem.actions"></td>
                <td class="orderedItem.name">{{_ 'Product Name'}}</td>
                <td>{{_ 'Unit Price'}}</td>
                <td>{{_ 'Quantity'}}</td>
                <td>{{_ 'Price'}}</td>
              </tr>
            </thead>

            {{#each orderedItems}}
            <tr>
              <td class="orderedItem.actions"></td>
              <td class="orderedItems.name">{{ this.name }}</td>
              <td>{{ this.unitPrice }}</td>
              <td>{{ this.quantity }}</td>
              <td>{{ this.totalPrice }}</td>
            </tr>
            {{/each}}

            <tfoot>
              <tr>
                <td class="orderedItem.actions"></td>
                <td></td>
                <td></td>
                <td class="tfoot-label">Subtotal</td>
                <td>{{ total.beforeGST }}</td>
              </tr>
              <tr>
                <td class="orderedItem.actions"></td>
                <td></td>
                <td></td>
                <td class="tfoot-label">GST</td>
                <td>{{ total.GST }}</td>
              </tr>
              <tr>
                <td class="orderedItem.actions"></td>
                <td></td>
                <td></td>
                <td class="tfoot-label">Total</td>
                <td>{{ total.afterGST }}</td>                
              </tr>
            </tfoot>
          </table>

      </fieldset>
      {{/with}}
    </article>
    {{/if}}
  {{/if}}
</template>
