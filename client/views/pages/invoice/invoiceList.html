<template name="invoiceList">
  <!--<a href="{{pathFor 'invoice.new' }}" data-nav-direction="right">New invoice</a>-->

  {{#contentFor "TopBar"}}
  <nav>
    {{#unless isUpdatingInvoice}}
      {{#if isAnyInvoiceSelected}}
        <a href="#" class="update">Update</a>
      {{else}}
        <a href="#" class="new">New</a>
      {{/if}}
    {{else}}
      <a href="#" class="cancel">Cancel</a>
    {{/unless}}
  </nav>
  {{/contentFor}}

  {{#contentFor "TheList"}}
  <ul class="list-multiple-lines">
    {{#each invoices}}
    <li class="{{ isThisInvoiceSelected }}" data-item-id="{{ _id }}">
      <article class="invoice-summary-card">
        <div class="invoice-total-after-GST">{{ total.plusGST }}d</div>
        <div class="invoice-customer-name">{{ customer.name }}</div>
        <div class="invoice-number">#{{ invoiceNumber }}</div>
        <div class="invoice-company-name">{{ customer.company }}</div>
      </article>
    </li>
    {{/each}}
  </ul>
  {{/contentFor}}

  {{#if isUpdatingInvoice }}
    <article id="InvoiceUpdate" class="invoice-details-card">
      {{> invoiceUpdate theInvoiceToUpdate=theSelectedInvoice}}
    </article>
  {{else}}
    {{#if isInsertingInvoice }}
      <article id="InvoiceInsert" class="invoice-details-card">
        {{> invoiceInsert }}
      </article>
    {{else}}
      <article id="InvoiceShow" class="invoice-details-card">
      {{#with theSelectedInvoice}}
      <row>
        <column class="invoice-customer-info" cols=8>
          <div class="invoice-customer-name">{{ customer.name }}</div>
          <div class="invoice-customer-company">{{ customer.company }}</div>
          <div class="invoice-customer-tax-number">{{ customer.taxNumber }}</div>
          <div class="invoice-customer-address">{{ customer.address }}</div>
        </column>

        <column class="invoice-generic-info" cols=4>
          <div class="invoice-number">{{_ "#"}}{{ invoiceNumber }}</div>
          <div class="invoice-date">15/10/2015</div>
        </column>
      </row>

      <row>
        <column cols=12>
          <table class="invoice-line-items">
            <tr class="order-item">
              <td class="description">The product name goes here #1</td>
              <td>10</td>
              <td>100,000d</td>
              <td>1,000,000d</td>
            </tr>
            <tr class="order-item">
              <td class="description">The product name goes here #1</td>
              <td>10</td>
              <td>100,000d</td>
              <td>1,000,000d</td>
            </tr>
            <tr class="order-item">
              <td class="description">The product name goes here #1</td>
              <td>10</td>
              <td>100,000d</td>
              <td>1,000,000d</td>
            </tr>
            <tfoot>
              <tr>
                <td></td>
                <td></td>
                <td><label>Subtotal</label></td>
                <td>3,000,000d</td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td><label>GST</label></td>
                <td>300,000d</td>
              </tr>
              <tr>
                <td></td>
                <td></td>
                <td><label>Total</label></td>
                <td>3,300,000d</td>
              </tr>
            </tfoot>
          </table>
        </column>
      </row>
      {{/with}}
    </article>
    {{/if}}
  {{/if}}
</template>
